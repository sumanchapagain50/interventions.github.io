<!DOCTYPE html>
<html>
<head>
    <title>Leaflet Map with Sidebar</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    
    <!-- Leaflet JS -->
    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    
    <!-- Leaflet Sidebar CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet-sidebar-v2/3.1.0/leaflet-sidebar.min.css" />
    
    <!-- Leaflet Sidebar JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet-sidebar-v2/3.1.0/leaflet-sidebar.min.js"></script>

    <style>
        #map {
            width: 80%;
            height: 600px;
            float: right;
        }
        .sidebar {
            width: 20%;
            height: 600px;
            float: left;
            overflow-y: auto;
        }
        .sidebar-content {
            padding: 10px;
        }
        .highlighted {
            background-color: yellow;
        }
        .button-container {
            margin: 10px 0;
        }
        .filter-button {
            display: block;
            width: 100%;
            padding: 10px;
            margin-bottom: 5px;
            background-color: #f1f1f1;
            border: none;
            cursor: pointer;
            text-align: left;
        }
        .filter-button.active {
            background-color: #d1d1d1;
        }
    </style>
</head>
<body>
    <div id="map"></div>
    <div class="sidebar">
        <div class="sidebar-content">
            <h2>Filters</h2>
            <div class="button-container">
                <button id="houses-button" class="filter-button active" onclick="toggleLayer('houses')">Houses</button>
                <button id="schools-button" class="filter-button active" onclick="toggleLayer('schools')">Schools</button>
            </div>
            <h2>Features</h2>
            <ul id="feature-list"></ul>
        </div>
    </div>

    <script>
        // Initialize the map
        var map = L.map('map').setView([28.3949, 84.1240], 7);

        // Add OpenStreetMap tile layer
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
        }).addTo(map);

        // Custom icons for houses and schools
        var houseIcon = L.icon({
            iconUrl: 'https://example.com/house-icon.png', // Replace with your house icon URL
            iconSize: [25, 41],
            iconAnchor: [12, 41],
            popupAnchor: [1, -34],
            shadowSize: [41, 41]
        });

        var schoolIcon = L.icon({
            iconUrl: 'https://example.com/school-icon.png', // Replace with your school icon URL
            iconSize: [25, 41],
            iconAnchor: [12, 41],
            popupAnchor: [1, -34],
            shadowSize: [41, 41]
        });

        // Sample data for houses and schools
        var houses = [
            { "name": "House 1", "lat": 27.7172, "lng": 85.3240 },
            { "name": "House 2", "lat": 27.6702, "lng": 85.3380 }
        ];

        var schools = [
            { "name": "School 1", "lat": 28.2074, "lng": 83.9856 },
            { "name": "School 2", "lat": 27.6588, "lng": 85.3246 }
        ];

        var houseLayer = L.layerGroup();
        var schoolLayer = L.layerGroup();

        houses.forEach(function (house) {
            var marker = L.marker([house.lat, house.lng], { icon: houseIcon }).bindPopup(house.name);
            houseLayer.addLayer(marker);
        });

        schools.forEach(function (school) {
            var marker = L.marker([school.lat, school.lng], { icon: schoolIcon }).bindPopup(school.name);
            schoolLayer.addLayer(marker);
        });

        // Add layers to the map
        houseLayer.addTo(map);
        schoolLayer.addTo(map);

        // Populate sidebar with feature list
        function addFeatureToList(feature, layer, type) {
            var listItem = document.createElement('li');
            listItem.textContent = feature.name;
            listItem.dataset.type = type;
            listItem.onclick = function() {
                map.setView([feature.lat, feature.lng], 15);
                highlightFeature(listItem);
            };
            document.getElementById('feature-list').appendChild(listItem);
        }

        houses.forEach(function (house) {
            addFeatureToList(house, houseLayer, "house");
        });

        schools.forEach(function (school) {
            addFeatureToList(school, schoolLayer, "school");
        });

        // Highlight selected feature in the sidebar
        function highlightFeature(listItem) {
            var items = document.querySelectorAll('#feature-list li');
            items.forEach(function(item) {
                item.classList.remove('highlighted');
            });
            listItem.classList.add('highlighted');
        }

        // Toggle visibility of layers
        function toggleLayer(layerName) {
            if (layerName === 'houses') {
                if (map.hasLayer(houseLayer)) {
                    map.removeLayer(houseLayer);
                    document.getElementById('houses-button').classList.remove('active');
                } else {
                    map.addLayer(houseLayer);
                    document.getElementById('houses-button').classList.add('active');
                }
            } else if (layerName === 'schools') {
                if (map.hasLayer(schoolLayer)) {
                    map.removeLayer(schoolLayer);
                    document.getElementById('schools-button').classList.remove('active');
                } else {
                    map.addLayer(schoolLayer);
                    document.getElementById('schools-button').classList.add('active');
                }
            }
        }
    </script>
</body>
</html>
